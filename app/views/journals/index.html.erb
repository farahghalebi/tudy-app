<% content_for :body_class, "aquarell-paper" %>

<div
  data-controller="swipe"
  data-swipe-down-url-value="<%= root_path %>"
  data-swipe-left-url-value="<%= params[:journal_id].present? ? journal_path(params[:journal_id]) : new_journal_path %>"
  style="min-height: 100vh;"
>

<div class="journals main-container">

  <h1 class="special-headline">My Journals</h1>
  <div class="journal-form-wrapper mt-md">
    <%#  Journal Title & Summary %>
    <ul class="list-unstyled">
    <% @journals.order(created_at: :desc)
                .group_by { |j| j.created_at.beginning_of_month }
                .each do |month, journals| %>
      <li>
        <h3 class="mt-md"><%= month.strftime("%B %Y") %></h3>
        <ul class="list-unstyled mt-md">
          <% journals.each do |journal| %>
            <li>
              <div class="journal-header">
                <div class="journal-title-date ai-output mt-sm">
                  <span class="journal-date"><%= journal.created_at.strftime("%d") %></span>
                  <h4>
                    <%= link_to journal.title, journal_path(journal),  class: "text-decoration-none text-reset" %>
                  </h4>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </li>
    <% end %>
  </ul>

    <!-- NAVIGATION-BUTTONS  -->

    <div class="swipe-button-box up">
      <%= link_to "home", root_path, class: "button-swipe" %>
    </div>

    <!-- Link goes back to Journal, if user was coming from Journal -->

    <div class="swipe-button-box right">
      <% if params[:journal_id] %>
        <%= link_to "Journal", journal_path(params[:journal_id]), class: "button-swipe" %>
      <% else %>
        <%= link_to "new", new_journal_path, class: "button-swipe" %>
      <% end %>
    </div>



  </div>
</div>
