<% content_for :body_class, "crumbled-paper" %>

<%# Previous journals %>
<% older_journal = current_user.journals.order(created_at: :desc).first %>

<div class="journal-new-page main-container"
     data-controller="swipe"
     data-swipe-right-url-value="<%= root_path %>"
     data-swipe-left-url-value="<%= todos_path %>"

    <% if older_journal %>
     data-swipe-up-url-value="<%= journal_path(older_journal) %>"
    <% end %>

     >

  <h1>a penny for your thought...</h1>

  <div class="journal-form-wrapper">
    <%= simple_form_for @journal, html: { class: "journal-form", data: { action: "input->form-validation#toggleSubmitButton" } } do |f| %>

      <%#= f.error_notification %>

      <%= f.input :content,
                  as: :text,
                  label: false,
                  placeholder: "What's on your mind?",
                  input_html: { class: "journal-input", data: { "form-validation-target": "input" } } %>

      <div class="swipe-button-box right">
        <%# ??? How can we style the right button - ideally like show page ??? %>
        <%= f.button :submit,
                    "todos",
                    class: "button-swipe",
                    data: { "form-validation-target": "submit" } %>
      </div>

      <%# File Input %>
      <div data-controller="file-preview">
        <%= f.input :file,
                    as: :file,
                    label: false,
                    input_html: {
                      id: "journal_file_input",
                      class: "d-none",
                      data: { "file-preview-target": "input", "action": "change->file-preview#updateFilename" }
                    }
        %>

        <div data-file-preview-target="filename" class="mt-1 fs-1 text-muted">
        </div>

        <label for="journal_file_input" style="z-index: 1000; position: relative;">
          <%= image_tag "icons/camera_icon.png", alt: "Picture Upload", width: 40, height: 40 %>
        </label>


      </div>

    <% end %>
  </div>

    <%# Swipe Buttons %>
    <div class="swipe-button-box left">
      <%= link_to "home", root_path, class: "button-swipe" %>
    </div>

    <% if older_journal %>
      <div class="swipe-button-box down">
        <%= link_to "older", journal_path(older_journal), class: "button-swipe" %>
      </div>
    <% end %>

</div>
